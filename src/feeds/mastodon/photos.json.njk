---
layout: null
permalink: /feeds/mastodon/photos.json
---
{
  "version": "https://jsonfeed.org/version/1",
  "title": "Photos - Nicolas Hoizey",
  "home_page_url": "{{ site.url }}",
  "feed_url": "{{ site.url }}/feeds/mastodon/links.json",
  "items": [
  {% for photo in collections.unique_photos %}
    {%- set photoPageUrl -%}{{ site.url }}{{ photo.url }}{%- endset -%}
    {%- set breadcrumb = collections.photo_galleries | breadcrumb(photo.url) -%}
    {%- set contentStart -%}ðŸ“¸ {{ photo.data.title | decodeEntities | escapeQuotes | safe }}\n\n{%- endset -%}
    {%- set contentStartLength = contentStart | length -%}
    {%- set contentEnd -%}\n\n{%- for item in breadcrumb -%}{% if not loop.first %}#{{ item.data.title | tagToHashtag | safe }} {% endif %}{%- endfor -%}#Photo #Photography #PhotoOfTheDay #DailyPhoto\n\nðŸ”Ž {% endset -%}
    {%- set contentEndLength = contentEnd | length -%}
    {%- set contentLength = contentStartLength + contentEndLength -%}
    {%- set contentMiddle = photo.data.origin.content | markdownify | replace("</p>\n<p>", "</p>\n\n<p>") | decodeEntities | striptags(true) | escapeQuotes | truncate(450 - contentLength, false, 'â€¦') | replace("\n", "\\n") | safe -%}
    {#- 500 characters on mamot.fr, 13 for URL, a few more for emojies -> 450 -#}
    {
      "id": "{{ photoPageUrl }}",
      "url": "{{ photoPageUrl }}",
      "lang": "{{ photo.data.lang }}",
      "title": "{{ photo.data.title | decodeEntities | escapeQuotes | safe }}",
      "date_published": "{{ photo.data.date | rssDate }}",
      "content_text": "{{- contentStart | safe -}}{{- contentMiddle | safe -}}{{- contentEnd | safe -}}{{ photoPageUrl }}",
      "attachments": [
        {
          "url": "{{ site.url }}/photos/{{ photo.fileSlug }}/small.jpg",
          "mime_type": "image/jpeg",
          "title": "Photo titled: {{ photo.data.title | decodeEntities | escapeQuotes | safe }}"
        }
      ]
    }{%- if not loop.last -%},{%- endif -%}
  {% endfor %}
  ]
}
